---
layout: post
title: "Git 명령어 정리"
---


# Git 명령어 정리

- 깃은 명령어 하나로만 동작하는 방법과 옵션을 같이 사용하여 동작하는 명령어로 나뉨
- 독립된 명령어들로 구성되어 있음
- 하위 명령어들을 같이 이용하면 동작 기능을 세분화 할 수 있음
- 추가 옵션도 같이 지정할 수 있음
    - 짧은 옵션(-), 긴 옵션(- -)으로 구분함

<aside>
💡 **$ git 명령어 또는 옵션**

</aside>

---

## 환경 설정

| 명령어 | 역할 |
| --- | --- |
| $ git config 설정값 | 환경 설정을 위한 명령어 |
| $ git config - -unset 이메일 주소 | 기존에 설정된 환경 파일을 삭제 |
| $ git config user .name “사용자이름” | 사용자 이름 설정(로컬 저장소를 생성할때마다 설정) |
| $ git config user .email “이메일 주소” | 사용자 이메일 설정(로컬 저장소를 생성할때마다 설정) |
| $ git config - -global user .name “사용자이름” | 설정된 사용자 이름의 값이 전역에 설정 됨 |
| $ git config - -global user .email “이메일 주소” | 설정된 사용자 이메일의 값이 전역에 설정 됨 |
| $ ls .git | 환경 설정 파일이 있는지 확인할 수 있음 |
| $ cat .git/config | 환경 설정 파일 확인 |

<aside>
💡 이메일 주소는 깃이 개발자를 구별하는 고유의 키 값으로 사용함
공개해도 무관한 이메일 주소를 사용하는 것을 권장

</aside>

---

## 깃 저장소 생성

| 명령어 | 역할 |
| --- | --- |
| $ mkdir 새폴더 이름 | 새 폴더 만들기 (make directory) |
| $ cd 이동할 폴더 | 만든 폴더로 이동 (change directory) |
| $ git init | 해당 폴더에 숨겨진 영역(숨겨진 폴더)을 추가함으로써 깃 저장소로 변경 |
| $ ls | 파일 목록을 출력하는 리눅스 명령어 |
| $ ls -a | 폴더 안의 숨겨진 파일을 같이 출력 |

---

## 워킹 디렉터리(WD) 및 스테이지(Stage)

| 명령어 | 역할 |
| --- | --- |
| $ git status  | 깃 상태를 확인할 수 있는 명령어
추적되지 않은 파일은 빨간색으로 표시함(아직 워킹디렉터리에 있음) |
| $ git add 파일이름 | stage에 등록
파일이름 대신 .을 이용하면 전체 파일과 폴더를 모두 등록 할 수 있음( .은 현재 디렉터리 ) |
| $ git rm - - cached 파일이름 | 파일 등록 취소(파일의 위치:Stage → WorkingDirectory) |
| $ git reset HEAD 파일이름 | 파일이 untracked 상태가 되고, 스테이지 영역에서 파일이 삭제됨 |
| $ git mv 파일이름 새파일이름
== 
$ mv 파일이름 새파일이름
$ git rm 파일이름
$ git add 새파일이름 | 파일 이름 변경 |
| $ git diff | 파일의 수정 및 변경 내역 확인 WD와 스테이지 사이의 차이점 확인 |
| $ git clean | 추적하지 않는 파일들 모두 삭제
주로 컴파일하는 과정에서 생기는 파일들을 청소하기 위한 작업
 |

<aside>
💡 스테이지 영역은 워킹디렉터리에서 추가한 파일들을 관리함

</aside>

- 기본적으로 커밋을하려면 파일의 상태가 추적 가능해야함
- 즉, stage에 올라간 상태 = tracked 상태
- stage에 올라간 파일만 깃에서 이력을 추적할 수 있음

---

## 깃 저장소 복제 및 커밋

| 명령어 | 역할 |
| --- | --- |
| $ git clone 원격저장소URL 새폴더이름 | 깃의 저장소를 복제. 새폴더이름을 지정하려면 추가 인자로 적어줌 |
| $ git commit | 수정된 파일 이력을 커밋 |
| $ git commit -a | 워킹디렉터리에서 바로 커밋 |
| $ git commit -m “커밋메시지” |  짧게 메시지를 작성하고 싶을때 |
| $ git commit - -allow -empty-message -m “”  | 커밋 메시지 생략 |
| $ git commit -v  | vi 에디터에서 diff 내용 추가 |
| $ git log | 시간 순으로 커밋 기록을 출력(최신 커밋 부터 내림차순으로 나열) |
| $ git log —pretty=short | 커밋메시지의 첫째줄만 |
| $ git log —pretty=oneline | 각 커밋을 한줄로 표현 |
| $ git show 커밋 ID | 어떤것을 수정했었는지 등 보고 싶을 때 |
| $ git log 파일이름 | 파일과 관련된 commit들이 나옴 |
| $ git log - -pretty=oneline | 각 커밋을 한 줄로 표시 |
| $ git log -p | diff기능을 같이 포함하여 출력할 수 있음 |
| $ git log - -stat | 히스토리를 출력 |
| $ git checkout - -수정파일이름 | 깃을 이용하면 수정한 파일을 커밋 전 마지막 내용(HEAD가 참조하고 있는 commit)으로 쉽게 되돌릴 수 있음 |
| $ git diff head  | WD와 최근에 커밋한 내용을 비교(커밋 간 차이) |
- 커밋 한 후에 습관적으로 git log 확인하는 것을 추천

<aside>
💡 커밋 메시지 작성
1. 요약 내용과 상세 내용을 분리하여 기록
2. 첫줄 = 제목, 다음 줄부터 상세 내용
3. 중간에 빈 줄로 구분
4. 첫째 줄을 분리하여 작성하는 것은 로그 출력을 간단하게 하기 위해서임

</aside>

<aside>
💡 정리)
1.폴더 만들기 md
2.폴더로 이동 cd
3.저장소 초기화 init
4.vscode로 파일 열어서 작업(working directory)
5.add 명령어로 stage
등록 취소 = rm 
6.commit 명령어로 커밋
등록 취소 = reset HEAD

확인
1. git status
2. git log

</aside>

cf) HEAD 는 최종적인 커밋 작업의 위치를 가리킴, 최소 한번 이상 커밋 해야 head가 존재함

---

## 원격(Remote)저장소

| 명령어 | 역할 |
| --- | --- |
| $ git remote | 원격저장소의 이름(별칭)을 출력, 간단하게 원격 저장소 목록만 확인할때 |
| $ git remote -v | 리모트 저장소가 여러개 있을 때 목록을 모두 출력 |
| $ git remote add 원격저장소별칭 원격저장소URL | 원격 저장소와 연결 |
| $ git remote rename 변경전 변경후 | 별칭 이름 변경 |
| $ git remote show 원격저장소 별칭 | 원격 저장소의 더 상세한 정보 확인 |
| $ git remote rm 원격저장소 별칭 | 원격 저장소 삭제 |
| $ git pull | 서버에서 모든 내용을 내려받기(자동병합O) |
| $ git fetch 원격저장소URL | 원격 저장소에서 커밋된 코드를 임시 브랜치로 내려받음(자동 병합X) |
| $ git merge 원격저장소별칭/브랜치이름 | 임시브랜치로 내려받은 코드를 해당 브랜치로 병합 |
| $ git push 원격저장소별칭/브랜치이름 | 원격 저장소로 전송 |

<aside>
💡 **origin은 대표적으로 사용하는 원격저장소 별칭 이름이다.**

</aside>

---

## 브랜치(Branch)

- 나무에서 가지가 뻗어 나오듯이 저장 공간 하나에서 가상의 다른 저장 공간을 만듦
- 프로젝트를 독립적으로 관리하는데 사용(개발 중인 작업과 구분하여 관리)
- 브랜치를 사용하여 분리된 코드를 버전 관리 시스템(깃)을 통하여 쉽게 병합 가능
- 깃은 기본적으로 master브랜치를 가짐
- 각 브랜치는 HEAD 포인터를 가지고 있음
- 브랜치의 생성 조건
    - 기준이 되는 브랜치 or 커밋이 존재
- 깃의 브랜치는 특정 커밋 해시 값을 가리키는 포인터

### Local branch

| 명령어 | 역할 |
| --- | --- |
| $ git branch | 간단 브랜치 목록 확인 |
| $ git branch 브랜치이름 (커밋ID) | 브랜치 생성할 때 , 커밋 ID를 작성하지 않으면 마지막 커밋을 기준으로 브랜치를 생성 및 추가함 |
| $ git rev-parse 브랜치이름 | 현재 브런치가 어떤 커밋 해시 값을 가리키는지 확인할 수 있음 |
| $ git branch -v  | 브랜치 이름, 커밋 ID, 커밋 메시지를 같이 볼 수 있음 |
| $ git checkout 브랜치 이름
$ git checkout 커밋해시키 | 현재 브랜치를 벗어나 새로운 브랜치로 들어감
(브랜치 이름은 커밋 해시키를 대신함) |
| $ git checkout - | 이전 브랜치로 이동 (리눅스에서 대시 기호는 이전 디렉터리를 의미함) |
| $ git checkout -b 브랜치이름  | 브랜치 생성 및 이동 |
| $ git log - -graph - -all | 로그를 출력할 때 브랜치의 흐름도 같이 출력 함 |
| $ git branch -d 브랜치이름 | 브랜치 삭제(스테이지가 깨끗한 상태일때만 가능) |

<aside>
💡 **브랜치 간에 정상적으로 이동하려면 남아 있는 작업들을 정리해 주어야 함**

</aside>

### Remote branch

- 원격 저장소에 생성한 브랜치
- 로컬 저장소에 생성한 브랜치를 원격 저장소로 공유 가능
- 로컬 저장소에 존재하는 브랜치와 이름은 보통 동일하지만 일치하지 않아도 됨
- **브랜치 추적**
    - 같은 말로 트래킹 브랜치 or 업스트림(**upstream**) 트래킹
    - 원격 저장소의 브랜치를 가리키는 것
    - 로컬 저장소의 브랜치와 원격 저장소 브랜치를 매칭시키는 역할

| 명령어 | 역할 |
| --- | --- |
| $ ls .git/refs | 원격 브랜치 정보 |
| $ git remote show 원격브랜치이름 | 원격저장소의 리모트 branch 확인 |
| $ git push 원격저장소별칭 브랜치이름 | 로컬의 브랜치를 원격 저장소에 연결 |
| $ git push -u 원격저장소별칭 브랜치이름 | 연결하는 동시에 앞으로 추적을 함(-u옵션: —set -upstream-to의 약자) |
| $ git push 원격저장소별칭 브랜치이름(local):새로운브랜치이름(remote) | 서로 다른 로컬 브랜치와 리모트 브랜치를 수동으로 지정하여 연결, 브랜치를 수동으로 지정할때 콜론으로 구분함 |
| $ git branch -r | 원격 저장소의 리모트 브랜치 목록 확인 |
| $ git branch -a | 모든 브랜치의 정보 확인 |
| $ git branch -vv | 복제 저장소의 트래킹 브랜치 확인 |
| $ git checkout —track origin/브랜치이름 | 새로운 브랜치 생성 후 원격 저장소와 연동 및 업스트림 설정 |
| $ git checkout -b 새이름 원격저장소별칭/브랜치이름 | 원격 저장소의 리모트 브랜치를 이용하여 새로운 이름을 가지는 로컬브랜치 생성 후 연결 |
| $ git push 원격저장소별칭 - -delete 리모트브랜치이름 | 리모트 브랜치 삭제 . 커밋 기록도 모두 삭제 |

<aside>
💡 **1. 원격 브랜치와 로컬 브랜치는 독립적. 한쪽에서 만들었다고 생성되지 않음
2. 저장소를 복제(clone)하면 원본과 동일한 트래킹 브랜치가 자동으로 설정됨
3. 현재 자신이 속한 브랜치는 삭제 불가능**

</aside>

---

## 스태시(stash)

- **commit이 되지 않은 변경 내용이 남아 있을 때, 현재 작업 내용을 임시로 저장할수 있도록 하는 기능**
- 브랜치 이동 시 워킹 디렉터리 충돌 방지
- 명령 실행 시 현재 작업 중인 내용은 **임시 스택 영역**에 **임시 저장**, 수정 전 마지막 커밋 상태로 돌아감
- 로컬 저장소에서만 사용 가능

| 명령어 | 역할 |
| --- | --- |
| $ git stash | 임시 스택 영역에 잠시 저장 |
| $ git stash save | 기능은 동일, 스태시 여러 개를 생성할 때 유용 |
| $ git stash save “WIP: 메시지” | 여러개의 스태시를 구분하기 위한 메시지를 적을 수 있는 기능(WIP:Working In Progress) |
| $ git stash list | 스태시에 저장된 스택 확인
stash@{번호}의 형태로 번호는 0부터 순차적으로 부여 |
| $ git stash show | WD와 stash된 파일 간의 변화 출력 |
| $ git stash show -p stash@{번호} | 변화 내역 상세하게 출력 |
| $ git stash pop | 임시로 저장했던 스태시를 WD로 불러오기(자동으로 스택 목록 삭제), 스택에 마지막으로 추가된 내용을 불러옴 |
| $ git stash apply stash@{번호} | pop과 같은 동작을 하지만 스택 목록을 읽은 후 자동으로 삭제하지 않음, 스택 목록의 중간 작업을 지정하여 적용 가능. stash@{번호}는 선택적으로 사용 가능. |
| $ git stash drop | 스태시 수동 삭제 |

<aside>
💡 복구되는 브랜치의 WD가 깨끗하지 않으면 병합 과정에서 충돌이 발생할 수 있음
충돌 발생시 스택에 저장된 내용들은 자동으로 삭제하지 않음
직접 충돌 해결 후 수동으로 삭제

</aside>

<aside>
💡 스태시를 너무 많이 만들지 않는 것을 권장. 필요하지 않으면 바로바로 삭제하기

</aside>
